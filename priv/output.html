<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <title>WIREGUARD config for %%user%%, ID: %%wg_client_configurationid%%</title>
</head>

<body>
  <pre style="display: none;">%%cfgfile%%</pre>
  <button onClick="copyToClipboard()">Kopiuj do schowka</button>
  <button onClick="downloadConfig()">Pobierz</button>
  <hr>
  %%cfgqr%%
  <hr>
  %%srvconfig%%
  <button onClick="copyToClipboard()">Kopiuj do schowka</button>
  <button onClick="downloadConfig()">Pobierz</button>
</body>

<script>
  function copyToClipboard (containerid) {
      var copyText = document.querySelector('pre').innerHTML;
      navigator.clipboard.writeText(copyText);
  }

function downloadConfig() {
    var content = document.querySelector('pre').innerHTML;
    var aaa = document.createElement('a');
    aaa.setAttribute('download', 'WG-%%poczatekdnia%%-%%wg_client_configurationid%%.conf');
    aaa.setAttribute('href', 'data:' + 'text/plain' + ';charset=utf-8,' + encodeURIComponent(content));
    aaa.click();
}

document.addEventListener('keydown', (e) => {
    e = e || window.event;
    if(e.keyCode == 116){
        e.preventDefault();
    }
});

</script>
</html>
